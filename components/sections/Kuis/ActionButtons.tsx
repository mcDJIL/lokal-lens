'use client';

import { motion } from 'framer-motion';
import { useParams, useRouter, useSearchParams } from 'next/navigation';

const ActionButtons = () => {
  const params = useParams();
  const router = useRouter();
  const searchParams = useSearchParams();
  const attemptId = searchParams.get('attemptId');

  const handleRetry = () => {
    router.push(`/kuis/${params.id}/mulai`);
  };

  const handleViewDiscussion = () => {
    router.push(`/kuis/${params.id}/pembahasan?attemptId=${attemptId}`);
  };

  const handleShare = () => {
    router.push(`/kuis/${params.id}/bagikan?attemptId=${attemptId}`);
  };

  return (
    <div className="w-full pt-6">
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5, delay: 0.6 }}
        className="flex flex-col sm:flex-row items-center justify-center gap-4 w-full"
      >
        {/* Ulangi Kuis Button */}
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          onClick={handleRetry}
          className="group flex items-center justify-center gap-2 h-12 min-w-[200px] px-10 rounded-3xl bg-[#006C84] hover:bg-[#005266] transition-all duration-300 shadow-md hover:shadow-lg w-full sm:w-auto"
        >
          <motion.svg
            animate={{ rotate: [0, 360] }}
            transition={{ 
              duration: 2,
              repeat: Infinity,
              ease: "linear",
              repeatDelay: 2
            }}
            width="24"
            height="28"
            viewBox="0 0 25 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12.01 21.7778C9.83866 21.7778 7.99954 21.0244 6.49259 19.5174C4.98565 18.0105 4.23218 16.1714 4.23218 14.0001C4.23218 11.8288 4.98565 9.98964 6.49259 8.48269C7.99954 6.97575 9.83866 6.22228 12.01 6.22228C13.128 6.22228 14.1975 6.45318 15.2183 6.91498C16.2391 7.37679 17.1141 8.03709 17.8433 8.89589V6.22228H19.7877V13.0278H12.9822V11.0834H17.0655C16.547 10.176 15.8381 9.46302 14.9388 8.9445C14.0395 8.42598 13.0632 8.16672 12.01 8.16672C10.3896 8.16672 9.01227 8.73385 7.87801 9.86811C6.74375 11.0024 6.17662 12.3797 6.17662 14.0001C6.17662 15.6204 6.74375 16.9977 7.87801 18.132C9.01227 19.2663 10.3896 19.8334 12.01 19.8334C13.2576 19.8334 14.3838 19.4769 15.3884 18.7639C16.3931 18.051 17.0979 17.1112 17.503 15.9445H19.5447C19.091 17.6621 18.1674 19.0637 16.7738 20.1494C15.3803 21.235 13.7924 21.7778 12.01 21.7778Z"
              fill="white"
            />
          </motion.svg>
          <span className="text-white text-center font-sans text-base font-bold leading-6 tracking-[0.24px]">
            Ulangi Kuis
          </span>
        </motion.button>

        {/* Lihat Pembahasan Button */}
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          onClick={handleViewDiscussion}
          className="group flex items-center justify-center gap-2 h-12 min-w-[200px] px-6 rounded-3xl bg-primary-gold bg-[#daa319] hover:bg-[#c29216] transition-all duration-300 shadow-md hover:shadow-lg w-full sm:w-auto"
        >
          <svg
            width="24"
            height="28"
            viewBox="0 0 25 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12.0049 17.8815C13.2197 17.8815 14.2523 17.4563 15.1026 16.606C15.9529 15.7556 16.3781 14.7231 16.3781 13.5083C16.3781 12.2935 15.9529 11.261 15.1026 10.4106C14.2523 9.5603 13.2197 9.13513 12.0049 9.13513C10.7902 9.13513 9.75761 9.5603 8.90727 10.4106C8.05692 11.261 7.63175 12.2935 7.63175 13.5083C7.63175 14.7231 8.05692 15.7556 8.90727 16.606C9.75761 17.4563 10.7902 17.8815 12.0049 17.8815ZM12.0049 16.1322C11.2761 16.1322 10.6565 15.8771 10.1463 15.3669C9.63613 14.8567 9.38103 14.2372 9.38103 13.5083C9.38103 12.7794 9.63613 12.1599 10.1463 11.6497C10.6565 11.1395 11.2761 10.8844 12.0049 10.8844C12.7338 10.8844 13.3533 11.1395 13.8635 11.6497C14.3737 12.1599 14.6288 12.7794 14.6288 13.5083C14.6288 14.2372 14.3737 14.8567 13.8635 15.3669C13.3533 15.8771 12.7338 16.1322 12.0049 16.1322ZM12.0049 20.7969C9.64018 20.7969 7.48598 20.1369 5.54235 18.8169C3.59871 17.4968 2.18958 15.7273 1.31494 13.5083C2.18958 11.2893 3.59871 9.5198 5.54235 8.19975C7.48598 6.8797 9.64018 6.21967 12.0049 6.21967C14.3697 6.21967 16.5239 6.8797 18.4675 8.19975C20.4112 9.5198 21.8203 11.2893 22.6949 13.5083C21.8203 15.7273 20.4112 17.4968 18.4675 18.8169C16.5239 20.1369 14.3697 20.7969 12.0049 20.7969ZM12.0049 18.8533C13.8352 18.8533 15.5156 18.3714 17.0462 17.4077C18.5768 16.444 19.7471 15.1442 20.5569 13.5083C19.7471 11.8724 18.5768 10.5726 17.0462 9.60889C15.5156 8.64517 13.8352 8.16331 12.0049 8.16331C10.1747 8.16331 8.49424 8.64517 6.96363 9.60889C5.43302 10.5726 4.26279 11.8724 3.45294 13.5083C4.26279 15.1442 5.43302 16.444 6.96363 17.4077C8.49424 18.3714 10.1747 18.8533 12.0049 18.8533Z"
              fill="white"
            />
          </svg>
          <span className="text-white text-center font-sans text-base font-bold leading-6 tracking-[0.24px]">
            Lihat Pembahasan
          </span>
        </motion.button>

        {/* Bagikan Hasil Button */}
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          onClick={handleShare}
          className="group flex items-center justify-center gap-2 h-12 min-w-[200px] px-8 rounded-3xl bg-white border border-[#D1D5DB] hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 shadow-sm hover:shadow-md w-full sm:w-auto"
        >
          <svg
            width="24"
            height="28"
            viewBox="0 0 25 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.8712 23.7222C16.061 23.7222 15.3723 23.4386 14.8052 22.8715C14.2381 22.3043 13.9545 21.6157 13.9545 20.8055C13.9545 20.7083 13.9788 20.4814 14.0274 20.1249L7.19756 16.1388C6.9383 16.3819 6.63854 16.5723 6.29826 16.71C5.95798 16.8477 5.5934 16.9166 5.20451 16.9166C4.39432 16.9166 3.70567 16.633 3.13854 16.0659C2.57141 15.4988 2.28784 14.8101 2.28784 13.9999C2.28784 13.1898 2.57141 12.5011 3.13854 11.934C3.70567 11.3668 4.39432 11.0833 5.20451 11.0833C5.5934 11.0833 5.95798 11.1521 6.29826 11.2899C6.63854 11.4276 6.9383 11.618 7.19756 11.8611L14.0274 7.87495C13.995 7.76152 13.9748 7.65215 13.9667 7.54682C13.9586 7.4415 13.9545 7.32402 13.9545 7.19439C13.9545 6.3842 14.2381 5.69555 14.8052 5.12842C15.3723 4.56129 16.061 4.27772 16.8712 4.27772C17.6814 4.27772 18.37 4.56129 18.9371 5.12842C19.5043 5.69555 19.7878 6.3842 19.7878 7.19439C19.7878 8.00457 19.5043 8.69323 18.9371 9.26036C18.37 9.82749 17.6814 10.1111 16.8712 10.1111C16.4823 10.1111 16.1177 10.0422 15.7774 9.90446C15.4371 9.76673 15.1374 9.57633 14.8781 9.33328L8.04826 13.3194C8.08067 13.4328 8.10092 13.5422 8.10902 13.6475C8.11712 13.7528 8.12118 13.8703 8.12118 13.9999C8.12118 14.1296 8.11712 14.2471 8.10902 14.3524C8.10092 14.4577 8.08067 14.5671 8.04826 14.6805L14.8781 18.6666C15.1374 18.4236 15.4371 18.2332 15.7774 18.0954C16.1177 17.9577 16.4823 17.8888 16.8712 17.8888C17.6814 17.8888 18.37 18.1724 18.9371 18.7395C19.5043 19.3067 19.7878 19.9953 19.7878 20.8055C19.7878 21.6157 19.5043 22.3043 18.9371 22.8715C18.37 23.4386 17.6814 23.7222 16.8712 23.7222ZM16.8712 21.7777C17.1466 21.7777 17.3775 21.6846 17.5639 21.4982C17.7502 21.3119 17.8434 21.081 17.8434 20.8055C17.8434 20.53 17.7502 20.2991 17.5639 20.1128C17.3775 19.9265 17.1466 19.8333 16.8712 19.8333C16.5957 19.8333 16.3648 19.9265 16.1785 20.1128C15.9921 20.2991 15.899 20.53 15.899 20.8055C15.899 21.081 15.9921 21.3119 16.1785 21.4982C16.3648 21.6846 16.5957 21.7777 16.8712 21.7777ZM5.20451 14.9722C5.47997 14.9722 5.71087 14.879 5.89722 14.6927C6.08356 14.5063 6.17673 14.2754 6.17673 13.9999C6.17673 13.7245 6.08356 13.4936 5.89722 13.3072C5.71087 13.1209 5.47997 13.0277 5.20451 13.0277C4.92905 13.0277 4.69814 13.1209 4.5118 13.3072C4.32546 13.4936 4.23229 13.7245 4.23229 13.9999C4.23229 14.2754 4.32546 14.5063 4.5118 14.6927C4.69814 14.879 4.92905 14.9722 5.20451 14.9722ZM16.8712 8.16661C17.1466 8.16661 17.3775 8.07344 17.5639 7.8871C17.7502 7.70076 17.8434 7.46985 17.8434 7.19439C17.8434 6.91893 17.7502 6.68802 17.5639 6.50168C17.3775 6.31534 17.1466 6.22217 16.8712 6.22217C16.5957 6.22217 16.3648 6.31534 16.1785 6.50168C15.9921 6.68802 15.899 6.91893 15.899 7.19439C15.899 7.46985 15.9921 7.70076 16.1785 7.8871C16.3648 8.07344 16.5957 8.16661 16.8712 8.16661Z"
              fill="#1A1A1A"
            />
          </svg>
          <span className="text-[#1A1A1A] text-center font-sans text-base font-bold leading-6 tracking-[0.24px]">
            Bagikan Hasil
          </span>
        </motion.button>
      </motion.div>
    </div>
  );
};

export default ActionButtons;
